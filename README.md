## How to run

1. Clone the repo.
2. Open the repo's folder in a command window. Run `npm install`.
3. Run `node server.js` to start the web server.

## Things of note
The `game/` directory holds all client files. `Build/`, `StreamingAssets/`, and `index.html` are the output of the Unity build and may be overwritten.

- `index.html` sets up a canvas for the Unity game and loads necessary scripts.
- `socket.js` maintains the websocket connection and listens/emits events to and from the Unity game
- `unityInstance.js` does some setup for the Unity game, instructing the browser on decompression and providing a global instance variable

`server.js` is a basic Express server for in-development testing. Note that some Content-Encoding headers need to be provided for certain files or else the client browser will complain.

## How Unity communicates with the browser
Information flows from Unity to the browser in this order (and vice versa):

1. The Unity Game's WebAssembly wants to run a Javascript function, and triggers an external library call
2. The `game.framework.js` is generated by Unity and interfaces between the WebAssembly (game) and the browser. A function is called here that sends an event within the DOM.
3. The code in `socket.js` listens for those DOM events and emits a socket event.
4. If there is data that needs to be passed back to Unity, it goes back through the `game.framework.js` and into a WebAssembly function call.
